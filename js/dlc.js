const dlcData = {
    "dlcPacks": [
        {
            "name": "Season 1",
            "vehicles": [
                {
                    "manufacturer": "Skoda",
                    "model": "Fabia Rally",
                    "discipline": "4WD Up to 2000cc"
                },
                {
                    "manufacturer": "Citroen",
                    "model": "C4 Rally",
                    "discipline": "4WD Up to 2000cc"
                },
                {
                    "manufacturer": "BMW",
                    "model": "M1 Procar Rally",
                    "discipline": "Group B(RWD)"
                },
                {
                    "manufacturer": "Opel",
                    "model": "Manta 400",
                    "discipline": "Group B(RWD)"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Focus RS Rally 2007",
                    "discipline": "4WD Up to 2000cc"
                },
                {
                    "manufacturer": "Subaru",
                    "model": "Impreza",
                    "discipline": "4WD Up to 2000cc"
                }
            ],
            "locations": [
                {
                    "name": "Monte Carlo",
                    "country": "Monaco"
                },
                {
                    "name": "Värmland",
                    "country": "Sweden"
                },
                {
                    "name": "Baumholder",
                    "country": "Germany"
                }
            ]
        },
        {
            "name": "Season 2",
            "vehicles": [
                {
                    "manufacturer": "Peugot",
                    "model": "205 T16 Rallycross",
                    "discipline": "RX Group B"
                },
                {
                    "manufacturer": "Ford",
                    "model": "RS200 Evolution",
                    "discipline": "RX Group B"
                },
                {
                    "manufacturer": "Porsche",
                    "model": "911 SC RS",
                    "discipline": "Group B(RWD)"
                },
                {
                    "manufacturer": "Lancia",
                    "model": "037 Evo 2",
                    "discipline": "Group B(RWD)"
                },
                {
                    "manufacturer": "Lancia",
                    "model": "Delta S4 Rallycross",
                    "discipline": "RX Group B"
                },
                {
                    "manufacturer": "MG",
                    "model": "Metro 6R4 Rallycross",
                    "discipline": "RX Group B"
                }
            ],
            "locations": [
                {
                    "name": "Bikernieki",
                    "country": "Latvia"
                },
                {
                    "name": "Powys",
                    "country": "Wales"
                },
                {
                    "name": "Estering",
                    "country": "Germany"
                }
            ]
        },
        {
            "name": "Season 3",
            "vehicles": [
                {
                    "manufacturer": "Subaru",
                    "model": "Impreza (2001)",
                    "discipline": "4WD Up to 2000cc"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Focus RS Rally 2001",
                    "discipline": "4WD Up to 2000cc"
                },
                {
                    "manufacturer": "Peugot",
                    "model": "306 Maxi",
                    "discipline": "F2 Kit Car"
                },
                {
                    "manufacturer": "Seat",
                    "model": "Ibiza Kitcar",
                    "discipline": "F2 Kit Car"
                },
                {
                    "manufacturer": "Peugot",
                    "model": "206 Rally",
                    "discipline": "4WD Up to 2000cc"
                },
                {
                    "manufacturer": "Volkswagen",
                    "model": "Golf Kitcar",
                    "discipline": "F2 Kit Car"
                }
            ],
            "locations": [
                {
                    "name": "Argolis",
                    "country": "Greece"
                },
                {
                    "name": "Yas Marina Circuit",
                    "country": "Abu Dhabi"
                },
                {
                    "name": "Jämsä",
                    "country": "Finland"
                }
            ]
        },
        {
            "name": "Season 4",
            "vehicles": [
                {
                    "manufacturer": "Renault Sport",
                    "model": "Clio R.S. RX",
                    "discipline": "RX Supercars 2019"
                },
                {
                    "manufacturer": "Renault Sport",
                    "model": "Megane R.S. RX",
                    "discipline": "RX Supercars 2019"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Fiesta Rallycross (MK8)",
                    "discipline": "RX Supercars"
                },
                {
                    "manufacturer": "Peugot",
                    "model": "208 WRX",
                    "discipline": "RX Supercars"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Fiesta Rallycross (STARD)",
                    "discipline": "RX Supercars 2019"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Fiesta RXS Evo 5",
                    "discipline": "RX Supercars 2019"
                },
                {
                    "manufacturer": "Audi",
                    "model": "S1 EKS RX Quattro",
                    "discipline": "RX Supercars 2019"
                },
                {
                    "manufacturer": "Seat",
                    "model": "Ibiza RX",
                    "discipline": "RX Supercars 2019"
                }
            ],
            "locations": [
                {
                    "name": "Killarney International Raceway",
                    "country": "South Africa"
                },
                {
                    "name": "Lydden Hill",
                    "country": "England"
                }
            ]
        },
        {
            "name": "Colin McRae: FLAT OUT Pack",
            "vehicles": [
                {
                    "manufacturer": "Subaru",
                    "model": "Legacy RS",
                    "discipline": "Group A"
                },
                {
                    "manufacturer": "Audi",
                    "model": "S1 EKS RX Quattro",
                    "discipline": "RX Supercars"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Escort MK II",
                    "discipline": "H2(RWD)"
                },
                {
                    "manufacturer": "Lancia",
                    "model": "Delta HF Integrale",
                    "discipline": "Group A"
                },
                {
                    "manufacturer": "Subaru",
                    "model": "Impreza 1995",
                    "discipline": "Group A"
                },
                {
                    "manufacturer": "Ford",
                    "model": "Sierra Cosworth RS500",
                    "discipline": "H3(RWD)"
                }
            ]
        },
        {
            "name": "Deluxe Content Packs",
            "content": [
                {
                    "name": "H2 RWD Double Pack",
                    "vehicles": [
                        {
                            "manufacturer": "Lancia",
                            "model": "037 Evo 2",
                            "discipline": "Group B(RWD)"
                        },
                        {
                            "manufacturer": "Porsche",
                            "model": "911 RGT Rally Spec",
                            "discipline": "Rally GT"
                        }
                    ]
                },
                {
                    "name": "Opel Manta 400",
                    "vehicles": [
                        {
                            "manufacturer": "Opel",
                            "model": "Manta 400",
                            "discipline": "Group B(RWD)"
                        }
                    ]
                },
                {
                    "name": "Sweden Rally",
                    "locations": [
                        {
                            "name": "Värmland",
                            "country": "Sweden"
                        }
                    ]
                },
                {
                    "name": "BMW M1 Procar Rally",
                    "vehicles": [
                        {
                            "manufacturer": "BMW", 
                            "model": "M1 Procar Rally",
                            "discipline": "Group B(RWD)"
                        }
                    ]
                },
                {
                    "name": "Deluxe Upgrade",
                    "content": [
                        {
                            "name": "Season 1",
                            "vehicles": [
                                {
                                    "manufacturer": "Skoda",
                                    "model": "Fabia Rally",
                                    "discipline": "4WD Up to 2000cc"
                                },
                                {
                                    "manufacturer": "Citroen",
                                    "model": "C4 Rally",
                                    "discipline": "4WD Up to 2000cc"
                                },
                                {
                                    "manufacturer": "BMW",
                                    "model": "M1 Procar Rally",
                                    "discipline": "Group B(RWD)"
                                },
                                {
                                    "manufacturer": "Opel",
                                    "model": "Manta 400",
                                    "discipline": "Group B(RWD)"
                                },
                                {
                                    "manufacturer": "Ford",
                                    "model": "Focus RS Rally 2007",
                                    "discipline": "4WD Up to 2000cc"
                                },
                                {
                                    "manufacturer": "Subaru",
                                    "model": "Impreza",
                                    "discipline": "4WD Up to 2000cc"
                                }
                            ],
                            "locations": [
                                {
                                    "name": "Monte Carlo",
                                    "country": "Monaco"
                                },
                                {
                                    "name": "Värmland",
                                    "country": "Sweden"
                                },
                                {
                                    "name": "Baumholder",
                                    "country": "Germany"
                                }
                            ]
                        },
                        {
                            "name": "Season 2",
                            "vehicles": [
                                {
                                    "manufacturer": "Peugot",
                                    "model": "205 T16 Rallycross",
                                    "discipline": "RX Group B"
                                },
                                {
                                    "manufacturer": "Ford",
                                    "model": "RS200 Evolution",
                                    "discipline": "RX Group B"
                                },
                                {
                                    "manufacturer": "Porsche",
                                    "model": "911 SC RS",
                                    "discipline": "Group B(RWD)"
                                },
                                {
                                    "manufacturer": "Lancia",
                                    "model": "037 Evo 2",
                                    "discipline": "Group B(RWD)"
                                },
                                {
                                    "manufacturer": "Lancia",
                                    "model": "Delta S4 Rallycross",
                                    "discipline": "RX Group B"
                                },
                                {
                                    "manufacturer": "MG",
                                    "model": "Metro 6R4 Rallycross",
                                    "discipline": "RX Group B"
                                }
                            ],
                            "locations": [
                                {
                                    "name": "Bikernieki",
                                    "country": "Latvia"
                                },
                                {
                                    "name": "Powys",
                                    "country": "Wales"
                                },
                                {
                                    "name": "Estering",
                                    "country": "Germany"
                                }
                            ]
                        }
                    ]
                },
                {
                    "name": "Ford Focus RS Rally 2007",
                    "vehicles": [
                        {
                            "manufacturer": "Ford",
                            "model": "Focus RS Rally 2007",
                            "discipline": "4WD Up to 2000cc"
                        }
                    ]
                },
                {
                    "name": "Subaru Impreza",
                    "vehicles": [
                        {
                            "manufacturer": "Subaru",
                            "model": "Impreza",
                            "discipline": "4WD Up to 2000cc"
                        }
                    ]
                },
                {
                    "name": "Deluxe Upgrade 2.0",
                    "content": [
                        {
                            "name": "Season 3",
                            "vehicles": [
                                {
                                    "manufacturer": "Subaru",
                                    "model": "Impreza (2001)",
                                    "discipline": "4WD Up to 2000cc"
                                },
                                {
                                    "manufacturer": "Ford",
                                    "model": "Focus RS Rally 2001",
                                    "discipline": "4WD Up to 2000cc"
                                },
                                {
                                    "manufacturer": "Peugot",
                                    "model": "306 Maxi",
                                    "discipline": "F2 Kit Car"
                                },
                                {
                                    "manufacturer": "Seat",
                                    "model": "Ibiza Kitcar",
                                    "discipline": "F2 Kit Car"
                                },
                                {
                                    "manufacturer": "Peugot",
                                    "model": "206 Rally",
                                    "discipline": "4WD Up to 2000cc"
                                },
                                {
                                    "manufacturer": "Volkswagen",
                                    "model": "Golf Kitcar",
                                    "discipline": "F2 Kit Car"
                                }
                            ],
                            "locations": [
                                {
                                    "name": "Argolis",
                                    "country": "Greece"
                                },
                                {
                                    "name": "Yas Marina Circuit",
                                    "country": "Abu Dhabi"
                                },
                                {
                                    "name": "Jämsä",
                                    "country": "Finland"
                                }
                            ] 
                        },
                        {
                            "name": "Season 4",
                            "vehicles": [
                                {
                                    "manufacturer": "Renault Sport",
                                    "model": "Clio R.S. RX",
                                    "discipline": "RX Supercars 2019"
                                },
                                {
                                    "manufacturer": "Renault Sport",
                                    "model": "Megane R.S. RX",
                                    "discipline": "RX Supercars 2019"
                                },
                                {
                                    "manufacturer": "Ford",
                                    "model": "Fiesta Rallycross (MK8)",
                                    "discipline": "RX Supercars"
                                },
                                {
                                    "manufacturer": "Peugot",
                                    "model": "208 WRX",
                                    "discipline": "RX Supercars"
                                },
                                {
                                    "manufacturer": "Ford",
                                    "model": "Fiesta Rallycross (STARD)",
                                    "discipline": "RX Supercars 2019"
                                },
                                {
                                    "manufacturer": "Ford",
                                    "model": "Fiesta RXS Evo 5",
                                    "discipline": "RX Supercars 2019"
                                },
                                {
                                    "manufacturer": "Audi",
                                    "model": "S1 EKS RX Quattro",
                                    "discipline": "RX Supercars 2019"
                                },
                                {
                                    "manufacturer": "Seat",
                                    "model": "Ibiza RX",
                                    "discipline": "RX Supercars 2019"
                                }
                            ],
                            "locations": [
                                {
                                    "name": "Killarney International Raceway",
                                    "country": "South Africa"
                                },
                                {
                                    "name": "Lydden Hill",
                                    "country": "England"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
};

const dlcPacks = dlcData.dlcPacks;
const dlcList = document.getElementById("dlc-list");

const dlcVehicles = [];
const dlcLocations = [];
const deluxeContent = [];
const deluxeUpgrade = [];
const dlcDelConImgs = [];
const dlcDelUpgImgs = [];

function findDLCKeyData() {
    dlcPacks.forEach((pack) => {
        if (pack.vehicles) {
            for (let i = 0; i < pack.vehicles.length; i++) {
                dlcVehicles.push(pack.vehicles[i]);
            }
        }
        if (pack.locations) {
            for (let i = 0; i < pack.locations.length; i++) {
                dlcLocations.push(pack.locations[i]);
            }
        }
        if (pack.content) {
            for (let i = 0; i < pack.content.length; i++) {
                if (pack.content[i].content) {
                    for (let j = 0; j < pack.content[i].content.length; j++) {
                        deluxeUpgrade.push(pack.content[i].content[j]);
                    }
                } else {
                    deluxeContent.push(pack.content[i]);
                }
            }
        }
    });
}

function convertDLC() {
    dlcPacks.forEach(dlcPack => {
        let packId = dlcPack.name.replace(/ /g, "-").toLowerCase();

        dlcList.insertAdjacentHTML(
            "beforeend",
            `<li id="dlc-${ packId }" class="dlc-collection tile">
                <h2>${ dlcPack.name }</h2>
                <ul id="dlc-items-${ packId }" class="dlc-tile-items"></ul>
                <a id="prev-btn-${ packId }" class="prev-btn fa-solid fa-chevron-left"></a>
                <a id="next-btn-${ packId }" class="next-btn fa-solid fa-chevron-right"></a>
            </li>`
        );

        const dlcItems = document.getElementById("dlc-items-" + packId);

        for (const value of Object.values(dlcPack)) {
            dlcLocations.forEach(dlcLocation => {
                let locationId = dlcLocation.name + " " + dlcLocation.country;
                locationId = locationId.replace(/ /g, "-").toLowerCase();
                if (value.includes(dlcLocation)) {
                    let img = dlcLocation.name + "-" + dlcLocation.country
                    img = img.replace(/ /g, "-").replace(/\//g, "").toLowerCase();
                    if (!document.getElementById(locationId)) {
                        dlcItems.insertAdjacentHTML(
                            "beforeend",
                            `<li id="dlc-tile-${ locationId }" class="tile dlc-slider-tile frosted-glass">
                                <div id="${ locationId }-blur" class="background-blur hide"></div>
                                <img src="images/locations/${ img }.jpg" alt="" class="location-img tile-img">
                                <ul id="dlc-text-list-${ locationId }" class="dlc-text-list hide">
                                    <li>
                                        <h2 class="dlc-location">${ dlcLocation.name }</h2>
                                        <h3 class="dlc-country">${ dlcLocation.country }</h3>
                                    </li>
                                </ul>
                            </li>`
                        );
                    }
                }
            });
            
            dlcVehicles.forEach(dlcVehicle => {
                let vehicleId = dlcVehicle.manufacturer + " " + dlcVehicle.model;
                vehicleId = vehicleId.replace(/ /g, "-").toLowerCase();
                if (value.includes(dlcVehicle)) {
                    let img = dlcVehicle.manufacturer + "-" + dlcVehicle.model + "-" + dlcVehicle.discipline;
                    img = img.replace(/ /g, "-").replace(/\//g, "").toLowerCase();
                    if (!document.getElementById(vehicleId)) {
                        dlcItems.insertAdjacentHTML(
                            "beforeend",
                            `<li id="dlc-tile-${ vehicleId }" class="tile dlc-slider-tile frosted-glass">
                                <div id="${ vehicleId }-blur" class="background-blur hide"></div>
                                <img src="images/vehicles/${ img }.jpg" alt="" class="vehicle-img tile-img">
                                <ul id="dlc-text-list-${ vehicleId }" class="dlc-text-list hide">
                                    <li>
                                        <h2 class="dlc-manufacturer">${ dlcVehicle.manufacturer }</h2>
                                        <h3 class="dlc-model">${ dlcVehicle.model }</h3>
                                    </li>
                                </ul>
                            </li>`
                        );
                    }
                }
            });
        }
    });

    deluxeContent.forEach(item => {
        const delConImgs = []
        const dlcCollection = document.getElementById("dlc-items-deluxe-content-packs");
        let dcpPackId = item.name.replace(/ /g, "-").toLowerCase();
        if (item.locations) {
            for (let i = 0; i < item.locations.length; i++) {
                let img = "images/locations/" + item.locations[i].name + "-" + item.locations[i].country + ".jpg";
                img = img.replace(/ /g, "-").toLowerCase();
                delConImgs.push(img);
            }
        }
        if (item.vehicles) {
            for (let i = 0; i < item.vehicles.length; i++) {
                let img = "images/vehicles/" + item.vehicles[i].manufacturer + "-" + item.vehicles[i].model + "-" + item.vehicles[i].discipline + ".jpg";
                img = img.replace(/ /g, "-").toLowerCase();
                delConImgs.push(img);
            }
        }
        dlcDelConImgs.push({name: item.name, arr: delConImgs});

        dlcCollection.insertAdjacentHTML(
            "beforeend",
            `<li id="delcon-tile-${ dcpPackId }" class="tile dlc-slider-tile frosted-glass">
                <div id="${ dcpPackId }-blur" class="background-blur hide"></div>
                <ul id="delcon-text-list-${ dcpPackId }" class="dlc-text-list hide">
                    <li class="collection-name">
                        <h1>${ item.name }</h1>
                    </li>
                    <li class="collection-includes">
                        <p>Includes</p>
                    </li>
                </ul>
            </li>`
        );
        
        const dcpCollection = document.getElementById("delcon-text-list-" + dcpPackId);

        if (item.locations) {
            for (let i = 0; i < item.locations.length; i++) {
                let locationId = item.locations[i].name + " " + item.locations[i].country;
                locationId = locationId.replace(/ /g, "-").toLowerCase();
                let img = item.locations[i].name + "-" + item.locations[i].country;
                img = img.replace(/ /g, "-").replace(/\//g, "").toLowerCase();

                dcpCollection.insertAdjacentHTML(
                    "beforeend",
                    `<li id="dlcdcp-item-${ locationId }" class="collection-content">
                        <p>- ${ item.locations[i].name }, ${ item.locations[i].country }</p>
                    </li>`
                );
            }
        }

        if (item.vehicles) {
            for (let i = 0; i < item.vehicles.length; i++) {
                let vehicleId = item.vehicles[i].manufacturer + " " + item.vehicles[i].model + "-" + item.vehicles[i].discipline;
                vehicleId = vehicleId.replace(/ /g, "-").toLowerCase();
                let img = item.vehicles[i].manufacturer + "-" + item.vehicles[i].model
                img = img.replace(/ /g, "-").replace(/\//g, "").toLowerCase();

                dcpCollection.insertAdjacentHTML(
                    "beforeend",
                    `<li id="dlcdcp-item-${ vehicleId }" class="collection-content">
                        <p>- ${ item.vehicles[i].manufacturer }, ${ item.vehicles[i].model }</p>
                    </li>`
                );
            }
        }
    });

    const delUpgImgs = [{name: "Deluxe Upgrade", arr: []}, {name: "Deluxe Upgrade 2.0", arr: []}];
    deluxeUpgrade.forEach(item => {
        const dlcCollection = document.getElementById("dlc-items-deluxe-content-packs");
        let collectionName = item.name  == "Season 1" || item.name == "Season 2" ? "Deluxe Upgrade" : "Deluxe Upgrade 2.0";
        let collectionId = collectionName.replace(/ /g, "-").toLowerCase();
        if (item.locations) {
            for (let i = 0; i < item.locations.length; i++) {
                let img = "images/locations/" + item.locations[i].name + "-" + item.locations[i].country + ".jpg";
                img = img.replace(/ /g, "-").toLowerCase();
                if (delUpgImgs[0].name === collectionName) {
                    delUpgImgs[0].arr.push(img);
                } else if (delUpgImgs[1].name === collectionName) {
                    delUpgImgs[1].arr.push(img);
                }
            }
        }
        if (item.vehicles) {
            for (let i = 0; i < item.vehicles.length; i++) {
                let img = "images/vehicles/" + item.vehicles[i].manufacturer + "-" + item.vehicles[i].model + "-" + item.vehicles[i].discipline + ".jpg";
                img = img.replace(/ /g, "-").toLowerCase();
                if (delUpgImgs[0].name === collectionName) {
                    delUpgImgs[0].arr.push(img);
                } else if (delUpgImgs[1].name === collectionName) {
                    delUpgImgs[1].arr.push(img);
                }
            }
        }
        if (dlcDelUpgImgs.length < 1) {
            dlcDelUpgImgs.push(delUpgImgs);
        }
        if (!document.getElementById("delupg-tile-" + collectionId)) {
            dlcCollection.insertAdjacentHTML(
                "beforeend",
                `<li id="delupg-tile-${ collectionId }" class="tile dlc-slider-tile frosted-glass">
                    <div id="${ collectionId }-blur" class="background-blur hide"></div>
                    <ul id="delupg-text-list-${ collectionId }" class="dlc-text-list hide">
                        <li class="collection-name">
                            <h1>${ collectionName }</h1>
                        </li>
                        <li class="collection-includes">
                            <p>Includes</p>
                        </li>
                    </ul>
                </li>`
            );
        }
        const collectionList = document.getElementById("delupg-text-list-" + collectionId);
            collectionList.insertAdjacentHTML(
                "beforeend",
                `<li class="collection-content">
                    <p>- ${ item.name }</p>
                </li>`
            );
    });
}

findDLCKeyData();
convertDLC();